# Задание №8

В этом задании вам нужно написать `case-study` о том как вы применили знания, полученные на курсе, к своим проектам.

## To start

Для начала напишите немного о своём проекте.

- На данный момент я занимаюсь разработкой образовательной платформы для Кувейта(www.uula.com). Начинал со старта проекта, когда нас было двое. Там была старая версия проекта, которую мы поддерживали, и начали реализацию новой версии, где масштабы и ожидания были совсем иные. В 1 версии у нас был проект на рельсе, в последствие сделали iOS приложение. Во 2 версии у нас бекенд на рельсе и три клиента, iOS, Android, Web(NextJS). Бекенд общается с клиентами с помощью GraphQL, а также там у нас есть админския панель.
- C 2014-2015 года разрабатывалась 1 версия, ее поддержка завершилась в 2019 году, когда стартовали вторую версию.
- В целом все отлично.
- Да используем Newrelic, а также мониторы AWS. Раньше подключали Scout и Datadog. Как 1, так и 2 версию начинали с того, что хостили на Heroku. Scout отлично работал, но цена, когда переехали на AWS, была высокой. Datadog пробовали во времена Heroku, там его полноценно использовать было не возможно, сейчас не могу вспомнить почему, возможно из-за отсутствия доступа к железу. Сейчас желания переехать куда-то нет, Newrelic устраивает.
- У нас есть newrelic, там можно посмотреть что оптимизировать. В последний тех цикл, оптимизировали удаление ассоциаций, которая аффектила 3 мутации. В последнее время не смотрел, что можно еще оптимизировать, перед следующим тех циклом посмотрю.
- Я работал еще в первой версии, когда проект был на аутсорсе в 2017 году, После этого вышел на фуллл тайм в 2019 году, и мы начали делать вторую версию. Я занимаюсь разработкой новых фичей.

Сделайте `PR` в этот репозиторий, и дорабатывайте его по ходу курса.

## Hints

Форма `case-study` - свободная.

Можно написать в форме интересной технической статьи на Хабр. Потом можно будет и опубликовать.

Можно взять за основу форму `case-study` из первого задания.

### MVP is OK

Оптимизация не обязана быть доведена до прода.

Например, вы рассмотрели какую-нибудь подсистему с `fullstack` точки зрения и придумали как её оптимизировать, сделали `MVP`, получили первые результаты.

В таком случаем интересно рассказать об этом.


### О чём интересно рассказать

- Интересная история, у нас есть мутация, которая сохраняет просмотренные секунды. Мы сохраняем переданное просмотренное время у видео. Например, клиент отправляет 100 сек, это значит, что мы должны сохранить время, которое он посмотрел, проверить является ли время, которое он посмотрел частично или полностью, также должны посчитать прогресс урока, полностью он прошел урок или нет. Частично или полностью внутренняя логика приложения. Урок имеет полное прохождение, если все материалы в нем были полностью просмотрены. У нас есть видео, тесты и текст материриалы. Также, если урок полностю пройден, то мы должны сообщить, что глава полностью пройдена. Разные команды использовали мутацию поразному и запрос результата был разный по времени. Это особенности GraphQL и обработки запроса в рамках GraphQL.
- При исходной ситуации наша мутация работала 80% времени от времени работы приложения.
- К сожаленияю не удалось поработать в итерационной модели, так как все проблемы были обнаружены в рамках одного деплоя на прод, и больше нас эта проблема не беспокоила. Она стала работать 30% времени от времени работы приложения.
- Я написал свой профайлер для GraphQL, чтобы понять, где мы больше всего времени затричиваем.
- Мы оптимизировали запрос к данным, а именно скипнули авториризацию и resolve данных, которые не были нужными в данном случае.
- Защищали это на уровне общения с клиентами, чтобы не запрашивали лишние данные в рамках данной мутациии. Тут все свелось к оптимизации обработки данной мутации и запрашиваемых данных от клиента в результате запроса GraphQL.
- Вопрос о деньгах не могу раскрыть, но в результате оптимизации данный запрос перестал быть точкой роста.

- В целом за время разработки 2 версии проекта я поучавстововал в постоянном обновлении ruby и js. Мы с ruby 2.7 переехали на ruby 3.2, а с js не помню с какой версии до 18. Каждый тех цикл мы обновляли версии всех наших библиотек, давая возмоджность не устаревать технологиям. Одна из самых сложных историй был переход с webpacker на shakapacker, и webpack 4 версии на 5 версию.
- Была оптмизация тестов, когда проект стал очень большим. Я принимал идейное участвие, там за счет параллезации и новых подходов к тестированию мы смогли довести наши тесты с 20 минут до 5. Мы использовали все подходы, которые описаны в курсе + екоторые свои назодки.

### Если ничего не приходит в голову

Всегда можно оптимизировать тесты вашего проекта с помощью `test-prof`! (если конечно они уже не доведены до идеала)

Всегда можно сделать аудит проекта с помощью `sitespeed.io`, `webpagetest`, `pagespeed insights`, `lighthouse` и применить предложенные советы.

## Как сдать задание

Сделайте `PR` в этот репозиторий с вашим `case-study`.
